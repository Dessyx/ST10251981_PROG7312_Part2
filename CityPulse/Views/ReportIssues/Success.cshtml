@{
    ViewData["Title"] = "Report Submitted";
}

<div class="alert alert-success">
    <h4>Your issue has been submitted.</h4>
    <p class="d-flex align-items-center gap-2">
        <span>Your reference number is:</span>
        <input id="refNum" class="form-control form-control-sm" style="max-width: 280px;" readonly value="@ViewBag.ReferenceNumber" />
        <button id="copyBtn" class="btn btn-outline-light btn-sm" type="button" title="Copy to clipboard">Copy</button>
        <span id="copyMsg" class="small ms-2" style="display:none;">Copied!</span>
    </p>
    <p>
        Keep this number to track your request status in the future.
    </p>
    <a class="btn btn-primary" asp-controller="Home" asp-action="Index">Back to Main Menu</a>
</div>

<script>
    (function() {
        const btn = document.getElementById('copyBtn');
        const input = document.getElementById('refNum');
        const msg = document.getElementById('copyMsg');
        if (!btn || !input) return;
        btn.addEventListener('click', async function() {
            try {
                await navigator.clipboard.writeText(input.value);
                msg.style.display = 'inline';
                setTimeout(() => { msg.style.display = 'none'; }, 1500);
            } catch (e) {
                input.select();
                document.execCommand('copy');
                msg.style.display = 'inline';
                setTimeout(() => { msg.style.display = 'none'; }, 1500);
            }
        });
    })();
    </script>


