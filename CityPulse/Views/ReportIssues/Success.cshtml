@{
    ViewData["Title"] = "Report Submitted";
}

<div class="alert alert-success">
    <h4>Your issue has been submitted.</h4>
    <div class="d-flex align-items-center gap-2">
        <span>Your reference number is:</span>
        <code id="refNumber">@ViewBag.ReferenceNumber</code>
        <button id="copyBtn" type="button" class="btn btn-outline-secondary btn-sm" title="Copy">
            Copy
        </button>
    </div>
    <p class="mt-2">
        Keep this number to track your request status in the future.
    </p>
    <a class="btn btn-primary" asp-controller="Home" asp-action="Index">Back to Main Menu</a>
</div>

<script>
    (function() {
        const btn = document.getElementById('copyBtn');
        const refEl = document.getElementById('refNumber');
        btn?.addEventListener('click', async function() {
            const text = refEl?.textContent?.trim();
            if (!text) return;
            try {
                await navigator.clipboard.writeText(text);
                btn.textContent = 'Copied!';
                setTimeout(() => btn.textContent = 'Copy', 1500);
            } catch (e) {
                // Fallback for older browsers
                const area = document.createElement('textarea');
                area.value = text;
                document.body.appendChild(area);
                area.select();
                document.execCommand('copy');
                document.body.removeChild(area);
                btn.textContent = 'Copied!';
                setTimeout(() => btn.textContent = 'Copy', 1500);
            }
        });
    })();
</script>


